\documentclass[12pt]{article}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{bm}
\usepackage[round]{natbib}
\usepackage{bm}
\newcommand{\Le}{\left(}
\newcommand{\Ri}{\right)}
\newcommand\independent{\protect\mathpalette{\protect\independenT}{\perp}}
\def\independenT#1#2{\mathrel{\rlap{$#1#2$}\mkern2mu{#1#2}}}
\newtheorem{theorem}{Theorem}
\newtheorem{corollary}{Corollary}
\newtheorem{lemma}{Lemma}


\begin{document}

\begin{lemma}
$$
\log \frac{P(D_{i, G_i} \ | \ \hat{\theta}_{i, G_i} )}{P(D_{G_i} \ | \ \hat{\theta}_{G_i} )} = \log P(D_i \ | \ \hat{\theta}_{i | G_i} )
$$
\end{lemma}
\begin{proof}
We can write the terms in the left hand side of the equation as
$$
P(D_{i, G_i} \ | \ \hat{\theta}_{i, G_i}) = \prod_{j,k} \Le \frac{N_{ijk}}{N}  \Ri^{N_{ijk}}
$$and
$$
P(D_{G_i} \ | \ \hat{\theta}_{G_i} ) =  \prod_{j} \Le \frac{N_{ij}}{N}  \Ri^{N_{ij}}.
$$Here, $N_{ijk}$ denotes the number of times we observe $X_i$ taking value $k$ when its parents are in $j$:th configuration in our data matrix $D$. Also, $N_{ij} = \sum_k N_{ijk}$ (and $\sum_{k,j}N_{ijk} = N$ for all $i$).

Now,
\begin{align*}
\frac{P(D_{i, G_i} \ | \ \hat{\theta}_{i, G_i} )}{P(D_{G_i} \ | \ \hat{\theta}_{G_i} )} &= \frac{ \prod_{j,k} \Le \frac{N_{ijk}}{N}  \Ri^{N_{ijk}}}{\prod_{j} \Le \frac{N_{ij}}{N}  \Ri^{N_{ij}}} \\
&= \frac{ \prod_{j,k} \Le \frac{N_{ijk}}{N}  \Ri^{N_{ijk}}}{\prod_{j} \Le \frac{N_{ij}}{N}  \Ri^{\sum_k N_{ijk}}} \\
&= \frac{ \prod_{j,k} \Le \frac{N_{ijk}}{N}  \Ri^{N_{ijk}}}{\prod_{j}\prod_{k} \Le \frac{N_{ij}}{N}  \Ri^{N_{ijk}}} \\ &= \frac{ \prod_{j,k} \Le \frac{N_{ijk}}{N}  \Ri^{N_{ijk}}}{\prod_{j,k} \Le \frac{N_{ij}}{N}  \Ri^{N_{ijk}}} \\
&= \prod_{j,k} \Le \frac{N_{ijk}}{N_{ij}} \Ri^{N_{ijk}} \\
&= P(D_i \ | \ \hat{\theta}_{i | G_i} ).
\end{align*} 
\end{proof}
\end{document}